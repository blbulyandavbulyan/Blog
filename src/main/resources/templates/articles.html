<!DOCTYPE html>
<html lang="en" xmlns:th>
<head>
    <div th:replace="fragments/header :: baseHead('Статьи')"></div>
    <script th:src="@{/js/app.js}"></script>
    <script th:src="@{/js/auth.js}"></script>
    <script th:src="@{/js/articles.js}"></script>
</head>
<body ng-app="blog">
<div class="container mt-4">
    <h1 class="mb-4">Список статей</h1>
    <div ng-controller="ArticleController">
        <form ng-submit="filterArticles" class="d-flex flex-row align-items-end">
            <div class="mb-3 me-3">
                <label for="titleInput" class="form-label d-flex flex-column">Название:</label>
                <input type="text" ng-model="filter.title" id="titleInput" class="form-control" placeholder="Введите название">
            </div>

            <div class="mb-3 me-3">
                <label for="authorInput" class="form-label d-flex flex-column">Имя автора:</label>
                <input type="text" ng-model="filter.author" id="authorInput" class="form-control" placeholder="Введите имя автора">
            </div>

            <div class="mb-3 me-3">
                <label for="dateInput" class="form-label d-flex flex-column">Дата до:</label>
                <input type="date" ng-model="filter.maxDate" id="dateInput" class="form-control">
            </div>
            <div class="mb-3 me-3">
                <button type="submit" class="btn btn-primary">Применить фильтр</button>
            </div>
        </form>
        <div class="card me-3" ng-repeat="article in articles">
            <div class="card-body">
                <h5 class="card-title"><a ng-href="{{generateArticleLink(article.articleId)}}">{{ article.title }}</a></h5>
                <p class="card-text">Издатель: {{ article.publisher.name }}</p>
                <p class="card-text"><small class="text-muted">{{ article.publishDate | date:'dd.MM.yyyy HH:mm:ss' }}</small></p>
            </div>
        </div>
        <div ng-show="pageNumbers.length > 1" id="pagination">
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item" ng-if="currentPage > 1">
                        <a class="page-link" href="javascript:void(0)" ng-click="getPage(currentPage - 1)">Previous</a>
                    </li>
                    <li class="page-item" ng-repeat="pageNumber in pageNumbers"
                        ng-class="{ 'active': currentPage === pageNumber }"
                        ng-click="getPage(pageNumber)">
                        <a class="page-link" href="javascript:void(0)">{{ pageNumber }}</a>
                    </li>
                    <li class="page-item" ng-if="currentPage < totalPages">
                        <a class="page-link" href="javascript:void(0)" ng-click="getPage(currentPage + 1)">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</body>
</html>